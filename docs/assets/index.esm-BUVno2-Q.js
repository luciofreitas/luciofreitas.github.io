const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DbidQ0J6.js","./index-DVGWeaSe.css"])))=>i.map(i=>d[i]);
import{r as o,j as n,u as L,A as T,d as B,C as $,_,e as O,f as W,g as D,h as U,E as z,i as G,F as V,k as H,G as q,l as J,O as Y,m as K,n as Q,P as X,o as Z,p as ee,q as te,t as re,S as ne,v as se,w as ae,x as oe,y as ie,z as le,B as ce,D as ue,H as de,I as he,J as pe,K as me,N as fe,Q as ge,U as ye,V as be,W as we,X as ve,Y as xe,Z as Ae,$ as Pe,a0 as Ce,a1 as Ee,a2 as Se,a3 as ke,a4 as Me,a5 as Re,a6 as je,a7 as Ne,a8 as _e,a9 as Fe,aa as Ie,ab as Le,ac as Te,ad as Be,ae as $e,af as Oe,ag as We,ah as De,ai as Ue,aj as ze,ak as Ge,al as Ve,am as He,an as qe,ao as Je,ap as Ye,aq as Ke,ar as Qe,as as Xe,at as Ze,au as et,av as tt,aw as rt,ax as nt,ay as st,az as at,aA as ot,aB as it,aC as lt,aD as ct,aE as ut,aF as dt,aG as ht,aH as pt,aI as mt,aJ as ft}from"./index-DbidQ0J6.js";function gt({nome:y,isPro:A=!1,onPerfil:E,onMeusCarros:M,onPro:c,onLogout:v,photoURL:g}){const[b,w]=o.useState(!1),p=o.useRef(null),u=o.useRef(null),[a,h]=o.useState({top:0,right:0}),[d,R]=o.useState(!1),[S,j]=o.useState(!1),k=typeof window<"u"&&window.__API_BASE||"",P=t=>{try{const e=String(t||"").trim().split(/\s+/).filter(Boolean);let l="";e.length===0?l="":e.length===1?l=e[0].charAt(0).toUpperCase():l=(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase();const m=["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722"];let f=0;const C=String(t||"user");for(let N=0;N<C.length;N++)f=(f<<5)-f+C.charCodeAt(N),f|=0;const F=m[Math.abs(f)%m.length],I=Math.abs(f)%m.length;return{initials:l,bg:F,idx:I}}catch{return{initials:"",bg:"#2196F3"}}},{initials:x,bg:i,idx:r}=P(y||"");o.useEffect(()=>{try{const e=p.current;if(!e)return;if(!g||d)e.style.setProperty("--avatar-bg",i),e.style.backgroundColor=i,e.setAttribute("data-bg",i);else{e.style.removeProperty("--avatar-bg"),e.style.backgroundColor="";try{e.removeAttribute("data-bg")}catch{}}}catch{}let t=null;try{(!g||d)&&(t=document.createElement("style"),t.setAttribute("data-generated","avatar-bg"),t.textContent=`
          .user-menu-root .user-button.icon-only .user-initials-desktop,
          .user-menu-root .user-button.icon-only .user-initials-mobile,
          .menu-login-root .user-menu-root .user-button.icon-only .user-initials-desktop,
          .menu-login-root .user-menu-root .user-button.icon-only .user-initials-mobile {
            background-color: ${i} !important;
          }
        `,document.head.appendChild(t))}catch{t=null}return()=>{try{t&&t.parentNode&&t.parentNode.removeChild(t)}catch{}}},[p,g,d,i]),o.useEffect(()=>{try{const t=p.current;if(!t)return;const e=t.querySelector&&t.querySelector(".user-initials-desktop"),l=t.querySelector&&t.querySelector(".user-initials-mobile"),m=`background-color: ${i}; color: #fff; display: inline-flex; align-items: center; justify-content: center; width: 100%; height: 100%;`;return e&&(e.setAttribute("style",m),e.setAttribute("data-bg",i)),l&&(l.setAttribute("style",m),l.setAttribute("data-bg",i)),()=>{try{e&&(e.removeAttribute("style"),e.removeAttribute("data-bg"))}catch{}try{l&&(l.removeAttribute("style"),l.removeAttribute("data-bg"))}catch{}}}catch{}},[p,i,g,d]);const s=()=>{if(p.current){const t=p.current.getBoundingClientRect();h({top:t.bottom,right:window.innerWidth-t.right})}};return o.useEffect(()=>{b&&s()},[b]),o.useEffect(()=>{function t(e){b&&p.current&&!p.current.contains(e.target)&&u.current&&!u.current.contains(e.target)&&w(!1)}return window.addEventListener("mousedown",t),window.addEventListener("resize",s),()=>{window.removeEventListener("mousedown",t),window.removeEventListener("resize",s)}},[b]),n.jsxs("div",{className:"user-menu-root",children:[n.jsx("button",{ref:p,className:`user-button icon-only ${A?"user-pro":""} ${!g||d?`avatar-color-${r} no-overlay`:""}`,style:!g||d?{backgroundColor:i}:void 0,onClick:()=>w(t=>!t),"aria-haspopup":"true","aria-expanded":b,children:g&&!d?n.jsx("img",{src:g,alt:y?`Avatar de ${y}`:"Avatar do usuário",className:"user-avatar",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:t=>{try{const e=t&&t.currentTarget&&t.currentTarget.src?String(t.currentTarget.src):g||"";if(!S&&e&&/googleusercontent\.com/i.test(e)){j(!0);const l=`${k}/api/avatar/proxy?url=${encodeURIComponent(e)}`;t.currentTarget.src=l;return}}catch{}R(!0)}}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"user-initials-desktop",width:"44",height:"44",viewBox:"0 0 44 44",role:"img","aria-label":y?`Avatar de ${y}`:"Avatar",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"22",cy:"22",r:"20",fill:i}),n.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:"0.36em",fontFamily:"Montserrat, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontWeight:"700",fontSize:"16",fill:"#FFFFFF",children:x})]}),n.jsxs("svg",{className:"user-initials-mobile",width:"36",height:"36",viewBox:"0 0 36 36",role:"img","aria-label":y?`Avatar de ${y}`:"Avatar",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"18",cy:"18",r:"16",fill:i}),n.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:"0.34em",fontFamily:"Montserrat, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontWeight:"700",fontSize:"14",fill:"#FFFFFF",children:x&&x.length>0?x.charAt(0):""})]})]})}),b&&n.jsxs("div",{ref:u,className:"user-dropdown",style:{top:`${a.top}px`,right:`${a.right}px`},children:[n.jsxs("div",{className:"dropdown-item dropdown-user-name dropdown-user-name-header",children:[n.jsxs("div",{className:"dropdown-user-name-row",children:["Olá, ",y]}),A&&n.jsx("div",{className:"dropdown-user-subtitle",children:"Assinante Pro"})]}),n.jsx("button",{className:"dropdown-item",onClick:()=>{w(!1),E()},children:"Perfil"}),n.jsx("button",{className:"dropdown-item",onClick:()=>{w(!1),M()},children:"Meus Carros"}),n.jsx("button",{className:"dropdown-item",onClick:()=>{w(!1),c()},children:"Versão Pro"}),n.jsx("button",{className:"dropdown-item dropdown-item-logout",onClick:()=>{w(!1),v()},children:"Sair"})]})]})}function wt(){const[y,A]=o.useState(!1),[E,M]=o.useState(0),[c,v]=o.useState(!1),[g,b]=o.useState({top:0,left:0}),[w,p]=o.useState(()=>typeof window<"u"?window.innerWidth<=768:!1),u=o.useRef(null),a=o.useRef(null),h=L(),{usuarioLogado:d,setUsuarioLogado:R}=o.useContext(T)||{},S=!!(d&&d.isPro)||localStorage.getItem("versaoProAtiva")==="true",j=o.useRef(null),k=[{id:"buscar",label:"Catálogo de Peças",onClick:()=>h("/buscar-pecas")},{id:"tabela-fipe",label:"Tabela FIPE",onClick:()=>h("/tabela-fipe")},{id:"recalls",label:"Recalls",onClick:()=>h("/recalls")},{id:"guias",label:"Guias",onClick:()=>h("/guias")},{id:"contato",label:"Contato",onClick:()=>h("/contato-logado")}];o.useEffect(()=>{const r=()=>{const s=window.scrollY;s>E&&s>60?A(!0):A(!1),M(s)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[E]),o.useEffect(()=>{const r=()=>{p(window.innerWidth<=768)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const P=()=>{if(u.current){const r=u.current.getBoundingClientRect(),s=Math.round(r.bottom+4),t=Math.round(r.left);if(a.current)if(!w)a.current.style.setProperty("--dropdown-top",`${s}px`),a.current.style.setProperty("--dropdown-left",`${t}px`);else{try{a.current.style.removeProperty("--dropdown-top"),a.current.style.removeProperty("--dropdown-left")}catch{}try{const e=u.current.getBoundingClientRect(),m=Math.round(e.bottom-6),f=Math.round(e.left);try{a.current.style.setProperty("top",`${m}px`,"important")}catch{a.current.style.top=`${m}px`}try{a.current.style.setProperty("left",`${f}px`,"important")}catch{a.current.style.left=`${f}px`}try{a.current.style.setProperty("right","auto","important")}catch{a.current.style.right="auto"}}catch{}}b({top:s,left:t})}},x=()=>{v(!1)},i=r=>s=>{s&&typeof s.preventDefault=="function"&&s.preventDefault(),x(),r()};return o.useEffect(()=>{function r(s){c&&u.current&&!u.current.contains(s.target)&&a.current&&!a.current.contains(s.target)&&v(!1)}return window.addEventListener("mousedown",r),window.addEventListener("resize",P),()=>{window.removeEventListener("mousedown",r),window.removeEventListener("resize",P)}},[c]),o.useLayoutEffect(()=>{if(c&&a.current&&u.current){const r=u.current.getBoundingClientRect(),s=Math.round(r.bottom+4),t=Math.round(r.left);try{if(!w)a.current.style.setProperty("--dropdown-top",`${s}px`),a.current.style.setProperty("--dropdown-left",`${t}px`);else{try{a.current.style.removeProperty("--dropdown-top"),a.current.style.removeProperty("--dropdown-left")}catch{}try{const e=u.current.getBoundingClientRect(),l=Math.round(e.bottom),m=Math.round(e.left);a.current.style.top=`${l}px`,a.current.style.left=`${m}px`,a.current.style.right="auto"}catch{}}}catch{}b({top:s,left:t})}},[c]),n.jsx("header",{ref:j,className:"site-header menu-login",children:n.jsxs("div",{className:"menu-login-root menu-responsive",children:[n.jsx(B,{}),n.jsxs("div",{className:"user-menu-root",children:[n.jsxs("button",{ref:u,className:`mobile-menu-toggle ${c?"active":""}`,onClick:()=>{v(r=>!r),c||P()},"aria-label":"Toggle mobile menu","aria-haspopup":"true","aria-expanded":c,children:[n.jsx("span",{className:"hamburger-line"}),n.jsx("span",{className:"hamburger-line"}),n.jsx("span",{className:"hamburger-line"})]}),n.jsx("div",{ref:a,className:`user-dropdown mobile-nav-dropdown ${c?"open":"closed"}`,role:"menu","aria-hidden":!c,hidden:!c,...c?{}:{inert:"true"},children:k.map(r=>n.jsx("button",{className:"dropdown-item",onClick:()=>{v(!1),typeof r.onClick=="function"&&r.onClick()},disabled:!c,tabIndex:c?0:-1,children:r.label},r.id))})]}),n.jsx("div",{className:"menu-login-center",children:n.jsx("nav",{className:"menu-nav",children:n.jsx("ul",{className:"menu-list",children:k.map(r=>n.jsx("li",{children:n.jsx("a",{href:`#${r.id}`,className:"menu-login-item",onClick:i(r.onClick),children:r.label})},r.id))})})}),n.jsx("div",{className:"menu-login-right",children:d?n.jsx(gt,{nome:d?.nome,photoURL:d?.photoURL,isPro:S,onPerfil:i(()=>h("/perfil")),onMeusCarros:i(()=>h("/meus-carros")),onPro:i(()=>h(S?"/versao-pro-assinado":"/versao-pro")),onLogout:i(async()=>{try{const{default:r}=await _(async()=>{const{default:s}=await import("./index-DbidQ0J6.js").then(t=>t.aK);return{default:s}},__vite__mapDeps([0,1]),import.meta.url);if(r&&r.auth&&typeof r.auth.signOut=="function")try{await r.auth.signOut()}catch{}}catch{}try{const r=await _(()=>Promise.resolve().then(()=>yt),void 0,import.meta.url),{signOut:s}=r,{auth:t}=await _(async()=>{const{auth:e}=await import("./index-DbidQ0J6.js").then(l=>l.aL);return{auth:e}},__vite__mapDeps([0,1]),import.meta.url);if(typeof s=="function"&&t)try{await s(t)}catch{}}catch{}R(null);try{localStorage.removeItem("usuario-logado")}catch{}h("/login")})}):n.jsx($,{onClick:i(()=>h("/login"))})})]})})}const yt=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:O,ActionCodeURL:W,AuthCredential:D,AuthErrorCodes:U,EmailAuthCredential:z,EmailAuthProvider:G,FacebookAuthProvider:V,FactorId:H,GithubAuthProvider:q,GoogleAuthProvider:J,OAuthCredential:Y,OAuthProvider:K,OperationType:Q,PhoneAuthCredential:X,PhoneAuthProvider:Z,PhoneMultiFactorGenerator:ee,ProviderId:te,RecaptchaVerifier:re,SAMLAuthProvider:ne,SignInMethod:se,TotpMultiFactorGenerator:ae,TotpSecret:oe,TwitterAuthProvider:ie,applyActionCode:le,beforeAuthStateChanged:ce,browserCookiePersistence:ue,browserLocalPersistence:de,browserPopupRedirectResolver:he,browserSessionPersistence:pe,checkActionCode:me,confirmPasswordReset:fe,connectAuthEmulator:ge,createUserWithEmailAndPassword:ye,debugErrorMap:be,deleteUser:we,fetchSignInMethodsForEmail:ve,getAdditionalUserInfo:xe,getAuth:Ae,getIdToken:Pe,getIdTokenResult:Ce,getMultiFactorResolver:Ee,getRedirectResult:Se,inMemoryPersistence:ke,indexedDBLocalPersistence:Me,initializeAuth:Re,initializeRecaptchaConfig:je,isSignInWithEmailLink:Ne,linkWithCredential:_e,linkWithPhoneNumber:Fe,linkWithPopup:Ie,linkWithRedirect:Le,multiFactor:Te,onAuthStateChanged:Be,onIdTokenChanged:$e,parseActionCodeURL:Oe,prodErrorMap:We,reauthenticateWithCredential:De,reauthenticateWithPhoneNumber:Ue,reauthenticateWithPopup:ze,reauthenticateWithRedirect:Ge,reload:Ve,revokeAccessToken:He,sendEmailVerification:qe,sendPasswordResetEmail:Je,sendSignInLinkToEmail:Ye,setPersistence:Ke,signInAnonymously:Qe,signInWithCredential:Xe,signInWithCustomToken:Ze,signInWithEmailAndPassword:et,signInWithEmailLink:tt,signInWithPhoneNumber:rt,signInWithPopup:nt,signInWithRedirect:st,signOut:at,unlink:ot,updateCurrentUser:it,updateEmail:lt,updatePassword:ct,updatePhoneNumber:ut,updateProfile:dt,useDeviceLanguage:ht,validatePassword:pt,verifyBeforeUpdateEmail:mt,verifyPasswordResetCode:ft},Symbol.toStringTag,{value:"Module"}));export{wt as M};
