const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CenzTBYW.js","./index-DhccLfdj.css"])))=>i.map(i=>d[i]);
import{r as o,j as a,u as L,A as T,f as B,C as O,_,h as $,k as W,l as D,m as U,E as z,n as G,F as H,o as V,G as q,p as J,O as Y,q as K,t as Q,P as X,v as Z,w as ee,x as te,y as re,S as ae,z as ne,B as se,D as oe,H as ie,I as le,J as ce,K as ue,N as de,Q as he,U as pe,V as me,W as fe,X as ge,Y as be,Z as ye,$ as we,a0 as ve,a1 as xe,a2 as Ae,a3 as Pe,a4 as Ce,a5 as Ee,a6 as Me,a7 as ke,a8 as Se,a9 as Re,aa as je,ab as Ne,ac as _e,ad as Fe,ae as Ie,af as Le,ag as Te,ah as Be,ai as Oe,aj as $e,ak as We,al as De,am as Ue,an as ze,ao as Ge,ap as He,aq as Ve,ar as qe,as as Je,at as Ye,au as Ke,av as Qe,aw as Xe,ax as Ze,ay as et,az as tt,aA as rt,aB as at,aC as nt,aD as st,aE as ot,aF as it,aG as lt,aH as ct,aI as ut,aJ as dt,aK as ht,aL as pt,aM as mt,aN as ft}from"./index-CenzTBYW.js";function gt({nome:b,isPro:A=!1,onPerfil:E,onMeusCarros:S,onPro:c,onLogout:v,photoURL:g}){const[y,w]=o.useState(!1),p=o.useRef(null),u=o.useRef(null),[s,d]=o.useState({top:0,right:0}),[h,R]=o.useState(!1),[M,j]=o.useState(!1),k=typeof window<"u"&&window.__API_BASE||"",P=t=>{try{const e=String(t||"").trim().split(/\s+/).filter(Boolean);let l="";e.length===0?l="":e.length===1?l=e[0].charAt(0).toUpperCase():l=(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase();const m=["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722"];let f=0;const C=String(t||"user");for(let N=0;N<C.length;N++)f=(f<<5)-f+C.charCodeAt(N),f|=0;const F=m[Math.abs(f)%m.length],I=Math.abs(f)%m.length;return{initials:l,bg:F,idx:I}}catch{return{initials:"",bg:"#2196F3"}}},{initials:x,bg:i,idx:r}=P(b||"");o.useEffect(()=>{try{const e=p.current;if(!e)return;if(!g||h)e.style.setProperty("--avatar-bg",i),e.style.backgroundColor=i,e.setAttribute("data-bg",i);else{e.style.removeProperty("--avatar-bg"),e.style.backgroundColor="";try{e.removeAttribute("data-bg")}catch{}}}catch{}let t=null;try{(!g||h)&&(t=document.createElement("style"),t.setAttribute("data-generated","avatar-bg"),t.textContent=`
          .user-menu-root .user-button.icon-only .user-initials-desktop,
          .user-menu-root .user-button.icon-only .user-initials-mobile,
          .menu-login-root .user-menu-root .user-button.icon-only .user-initials-desktop,
          .menu-login-root .user-menu-root .user-button.icon-only .user-initials-mobile {
            background-color: ${i} !important;
          }
        `,document.head.appendChild(t))}catch{t=null}return()=>{try{t&&t.parentNode&&t.parentNode.removeChild(t)}catch{}}},[p,g,h,i]),o.useEffect(()=>{try{const t=p.current;if(!t)return;const e=t.querySelector&&t.querySelector(".user-initials-desktop"),l=t.querySelector&&t.querySelector(".user-initials-mobile"),m=`background-color: ${i}; color: #fff; display: inline-flex; align-items: center; justify-content: center; width: 100%; height: 100%;`;return e&&(e.setAttribute("style",m),e.setAttribute("data-bg",i)),l&&(l.setAttribute("style",m),l.setAttribute("data-bg",i)),()=>{try{e&&(e.removeAttribute("style"),e.removeAttribute("data-bg"))}catch{}try{l&&(l.removeAttribute("style"),l.removeAttribute("data-bg"))}catch{}}}catch{}},[p,i,g,h]);const n=()=>{if(p.current){const t=p.current.getBoundingClientRect();d({top:t.bottom,right:window.innerWidth-t.right})}};return o.useEffect(()=>{y&&n()},[y]),o.useEffect(()=>{function t(e){y&&p.current&&!p.current.contains(e.target)&&u.current&&!u.current.contains(e.target)&&w(!1)}return window.addEventListener("mousedown",t),window.addEventListener("resize",n),()=>{window.removeEventListener("mousedown",t),window.removeEventListener("resize",n)}},[y]),a.jsxs("div",{className:"user-menu-root",children:[a.jsx("button",{ref:p,className:`user-button icon-only ${A?"user-pro":""} ${!g||h?`avatar-color-${r} no-overlay`:""}`,style:!g||h?{backgroundColor:i}:void 0,onClick:()=>w(t=>!t),"aria-haspopup":"true","aria-expanded":y,children:g&&!h?a.jsx("img",{src:g,alt:b?`Avatar de ${b}`:"Avatar do usuário",className:"user-avatar",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:t=>{try{const e=t&&t.currentTarget&&t.currentTarget.src?String(t.currentTarget.src):g||"";if(!M&&e&&/googleusercontent\.com/i.test(e)){j(!0);const l=`${k}/api/avatar/proxy?url=${encodeURIComponent(e)}`;t.currentTarget.src=l;return}}catch{}R(!0)}}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"user-initials-desktop",width:"44",height:"44",viewBox:"0 0 44 44",role:"img","aria-label":b?`Avatar de ${b}`:"Avatar",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"22",cy:"22",r:"20",fill:i}),a.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:"0.36em",fontFamily:"Montserrat, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontWeight:"700",fontSize:"16",fill:"#FFFFFF",children:x})]}),a.jsxs("svg",{className:"user-initials-mobile",width:"36",height:"36",viewBox:"0 0 36 36",role:"img","aria-label":b?`Avatar de ${b}`:"Avatar",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("circle",{cx:"18",cy:"18",r:"16",fill:i}),a.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:"0.34em",fontFamily:"Montserrat, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontWeight:"700",fontSize:"14",fill:"#FFFFFF",children:x&&x.length>0?x.charAt(0):""})]})]})}),y&&a.jsxs("div",{ref:u,className:"user-dropdown",style:{top:`${s.top}px`,right:`${s.right}px`},children:[a.jsxs("div",{className:"dropdown-item dropdown-user-name dropdown-user-name-header",children:[a.jsxs("div",{className:"dropdown-user-name-row",children:["Olá, ",b]}),A&&a.jsx("div",{className:"dropdown-user-subtitle",children:"Assinante Pro"})]}),a.jsx("button",{className:"dropdown-item",onClick:()=>{w(!1),E()},children:"Perfil"}),a.jsx("button",{className:"dropdown-item",onClick:()=>{w(!1),S()},children:"Meus Carros"}),a.jsx("button",{className:"dropdown-item",onClick:()=>{w(!1),c()},children:"Versão Pro"}),a.jsx("button",{className:"dropdown-item dropdown-item-logout",onClick:()=>{w(!1),v()},children:"Sair"})]})]})}function wt(){const[b,A]=o.useState(!1),[E,S]=o.useState(0),[c,v]=o.useState(!1),[g,y]=o.useState({top:0,left:0}),[w,p]=o.useState(()=>typeof window<"u"?window.innerWidth<=768:!1),u=o.useRef(null),s=o.useRef(null),d=L(),{usuarioLogado:h,setUsuarioLogado:R}=o.useContext(T)||{},M=!!(h&&h.isPro)||localStorage.getItem("versaoProAtiva")==="true",j=o.useRef(null),k=[{id:"buscar",label:"Catálogo de Peças",onClick:()=>d("/buscar-pecas")},{id:"tabela-fipe",label:"Tabela FIPE",onClick:()=>d("/tabela-fipe")},{id:"recalls",label:"Recalls",onClick:()=>d("/recalls")},{id:"historico",label:"Histórico de Manutenção",onClick:()=>d("/historico-manutencao")},{id:"guias",label:"Guias",onClick:()=>d("/guias")},{id:"contato",label:"Contato",onClick:()=>d("/contato-logado")}];o.useEffect(()=>{const r=()=>{const n=window.scrollY;n>E&&n>60?A(!0):A(!1),S(n)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[E]),o.useEffect(()=>{const r=()=>{p(window.innerWidth<=768)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const P=()=>{if(u.current){const r=u.current.getBoundingClientRect(),n=Math.round(r.bottom+4),t=Math.round(r.left);if(s.current)if(!w)s.current.style.setProperty("--dropdown-top",`${n}px`),s.current.style.setProperty("--dropdown-left",`${t}px`);else{try{s.current.style.removeProperty("--dropdown-top"),s.current.style.removeProperty("--dropdown-left")}catch{}try{const e=u.current.getBoundingClientRect(),m=Math.round(e.bottom-6),f=Math.round(e.left);try{s.current.style.setProperty("top",`${m}px`,"important")}catch{s.current.style.top=`${m}px`}try{s.current.style.setProperty("left",`${f}px`,"important")}catch{s.current.style.left=`${f}px`}try{s.current.style.setProperty("right","auto","important")}catch{s.current.style.right="auto"}}catch{}}y({top:n,left:t})}},x=()=>{v(!1)},i=r=>n=>{n&&typeof n.preventDefault=="function"&&n.preventDefault(),x(),r()};return o.useEffect(()=>{function r(n){c&&u.current&&!u.current.contains(n.target)&&s.current&&!s.current.contains(n.target)&&v(!1)}return window.addEventListener("mousedown",r),window.addEventListener("resize",P),()=>{window.removeEventListener("mousedown",r),window.removeEventListener("resize",P)}},[c]),o.useLayoutEffect(()=>{if(c&&s.current&&u.current){const r=u.current.getBoundingClientRect(),n=Math.round(r.bottom+4),t=Math.round(r.left);try{if(!w)s.current.style.setProperty("--dropdown-top",`${n}px`),s.current.style.setProperty("--dropdown-left",`${t}px`);else{try{s.current.style.removeProperty("--dropdown-top"),s.current.style.removeProperty("--dropdown-left")}catch{}try{const e=u.current.getBoundingClientRect(),l=Math.round(e.bottom),m=Math.round(e.left);s.current.style.top=`${l}px`,s.current.style.left=`${m}px`,s.current.style.right="auto"}catch{}}}catch{}y({top:n,left:t})}},[c]),a.jsx("header",{ref:j,className:"site-header menu-login",children:a.jsxs("div",{className:"menu-login-root menu-responsive",children:[a.jsx(B,{}),a.jsxs("div",{className:"user-menu-root",children:[a.jsxs("button",{ref:u,className:`mobile-menu-toggle ${c?"active":""}`,onClick:()=>{v(r=>!r),c||P()},"aria-label":"Toggle mobile menu","aria-haspopup":"true","aria-expanded":c,children:[a.jsx("span",{className:"hamburger-line"}),a.jsx("span",{className:"hamburger-line"}),a.jsx("span",{className:"hamburger-line"})]}),a.jsx("div",{ref:s,className:`user-dropdown mobile-nav-dropdown ${c?"open":"closed"}`,role:"menu","aria-hidden":!c,hidden:!c,...c?{}:{inert:"true"},children:k.map(r=>a.jsx("button",{className:"dropdown-item",onClick:()=>{v(!1),typeof r.onClick=="function"&&r.onClick()},disabled:!c,tabIndex:c?0:-1,children:r.label},r.id))})]}),a.jsx("div",{className:"menu-login-center",children:a.jsx("nav",{className:"menu-nav",children:a.jsx("ul",{className:"menu-list",children:k.map(r=>a.jsx("li",{children:a.jsx("a",{href:`#${r.id}`,className:"menu-login-item",onClick:i(r.onClick),children:r.label})},r.id))})})}),a.jsx("div",{className:"menu-login-right",children:h?a.jsx(gt,{nome:h?.nome,photoURL:h?.photoURL,isPro:M,onPerfil:i(()=>d("/perfil")),onMeusCarros:i(()=>d("/meus-carros")),onPro:i(()=>d(M?"/versao-pro-assinado":"/versao-pro")),onLogout:i(async()=>{try{const{default:r}=await _(async()=>{const{default:n}=await import("./index-CenzTBYW.js").then(t=>t.aO);return{default:n}},__vite__mapDeps([0,1]),import.meta.url);if(r&&r.auth&&typeof r.auth.signOut=="function")try{await r.auth.signOut()}catch{}}catch{}try{const r=await _(()=>Promise.resolve().then(()=>bt),void 0,import.meta.url),{signOut:n}=r,{auth:t}=await _(async()=>{const{auth:e}=await import("./index-CenzTBYW.js").then(l=>l.aP);return{auth:e}},__vite__mapDeps([0,1]),import.meta.url);if(typeof n=="function"&&t)try{await n(t)}catch{}}catch{}R(null);try{localStorage.removeItem("usuario-logado")}catch{}d("/login")})}):a.jsx(O,{onClick:i(()=>d("/login"))})})]})})}const bt=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:$,ActionCodeURL:W,AuthCredential:D,AuthErrorCodes:U,EmailAuthCredential:z,EmailAuthProvider:G,FacebookAuthProvider:H,FactorId:V,GithubAuthProvider:q,GoogleAuthProvider:J,OAuthCredential:Y,OAuthProvider:K,OperationType:Q,PhoneAuthCredential:X,PhoneAuthProvider:Z,PhoneMultiFactorGenerator:ee,ProviderId:te,RecaptchaVerifier:re,SAMLAuthProvider:ae,SignInMethod:ne,TotpMultiFactorGenerator:se,TotpSecret:oe,TwitterAuthProvider:ie,applyActionCode:le,beforeAuthStateChanged:ce,browserCookiePersistence:ue,browserLocalPersistence:de,browserPopupRedirectResolver:he,browserSessionPersistence:pe,checkActionCode:me,confirmPasswordReset:fe,connectAuthEmulator:ge,createUserWithEmailAndPassword:be,debugErrorMap:ye,deleteUser:we,fetchSignInMethodsForEmail:ve,getAdditionalUserInfo:xe,getAuth:Ae,getIdToken:Pe,getIdTokenResult:Ce,getMultiFactorResolver:Ee,getRedirectResult:Me,inMemoryPersistence:ke,indexedDBLocalPersistence:Se,initializeAuth:Re,initializeRecaptchaConfig:je,isSignInWithEmailLink:Ne,linkWithCredential:_e,linkWithPhoneNumber:Fe,linkWithPopup:Ie,linkWithRedirect:Le,multiFactor:Te,onAuthStateChanged:Be,onIdTokenChanged:Oe,parseActionCodeURL:$e,prodErrorMap:We,reauthenticateWithCredential:De,reauthenticateWithPhoneNumber:Ue,reauthenticateWithPopup:ze,reauthenticateWithRedirect:Ge,reload:He,revokeAccessToken:Ve,sendEmailVerification:qe,sendPasswordResetEmail:Je,sendSignInLinkToEmail:Ye,setPersistence:Ke,signInAnonymously:Qe,signInWithCredential:Xe,signInWithCustomToken:Ze,signInWithEmailAndPassword:et,signInWithEmailLink:tt,signInWithPhoneNumber:rt,signInWithPopup:at,signInWithRedirect:nt,signOut:st,unlink:ot,updateCurrentUser:it,updateEmail:lt,updatePassword:ct,updatePhoneNumber:ut,updateProfile:dt,useDeviceLanguage:ht,validatePassword:pt,verifyBeforeUpdateEmail:mt,verifyPasswordResetCode:ft},Symbol.toStringTag,{value:"Module"}));export{wt as M};
