import{r as a,u as b,j as e,M as l,s as m}from"./index-CAj8z-ZV.js";function w(){const[i,f]=a.useState(""),[h,x]=a.useState(""),[c,u]=a.useState(!1),[t,n]=a.useState(""),[v,j]=a.useState(!1),[p,d]=a.useState(!1),[g,N]=a.useState(!0),o=b();a.useEffect(()=>{(async()=>{try{const{data:{session:s},error:k}=await m.auth.getSession();k||!s?(n("Link de recuperaÃ§Ã£o invÃ¡lido ou expirado. Solicite um novo link."),d(!1)):d(!0)}catch(s){console.error("Erro ao verificar token:",s),n("Erro ao validar link de recuperaÃ§Ã£o."),d(!1)}finally{N(!1)}})()},[]);const S=async r=>{if(r.preventDefault(),n(""),i.length<6){n("A senha deve ter pelo menos 6 caracteres.");return}if(i!==h){n("As senhas nÃ£o coincidem.");return}u(!0);try{const{error:s}=await m.auth.updateUser({password:i});if(s)throw s;j(!0),setTimeout(()=>{o("/login")},3e3)}catch(s){console.error("Erro ao redefinir senha:",s),n("Erro ao redefinir senha. Tente novamente ou solicite um novo link.")}finally{u(!1)}};return g?e.jsxs("div",{className:"page-wrapper",children:[e.jsx(l,{}),e.jsx("div",{className:"redefinir-senha-container",children:e.jsx("div",{className:"redefinir-senha-card",children:e.jsx("div",{className:"loading-message",children:"â³ Verificando link de recuperaÃ§Ã£o..."})})})]}):p?v?e.jsxs("div",{className:"page-wrapper",children:[e.jsx(l,{}),e.jsx("div",{className:"redefinir-senha-container",children:e.jsx("div",{className:"redefinir-senha-card",children:e.jsxs("div",{className:"success-container",children:[e.jsx("h2",{children:"âœ… Senha Redefinida!"}),e.jsx("p",{children:"Sua senha foi alterada com sucesso!"}),e.jsx("p",{className:"redirect-message",children:"Redirecionando para o login em 3 segundos..."}),e.jsx("button",{onClick:()=>o("/login"),className:"action-btn",children:"Ir para o login agora"})]})})})]}):e.jsxs("div",{className:"page-wrapper",children:[e.jsx(l,{}),e.jsx("div",{className:"redefinir-senha-container",children:e.jsxs("div",{className:"redefinir-senha-card",children:[e.jsxs("div",{className:"redefinir-senha-header",children:[e.jsx("h1",{children:"ğŸ”‘ Redefinir Senha"}),e.jsx("p",{children:"Crie uma nova senha segura para sua conta."})]}),e.jsxs("form",{onSubmit:S,className:"redefinir-senha-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"novaSenha",children:"Nova Senha:"}),e.jsx("input",{type:"password",id:"novaSenha",value:i,onChange:r=>f(r.target.value),placeholder:"Digite sua nova senha",required:!0,disabled:c,className:"input-field",minLength:6}),e.jsx("small",{className:"hint",children:"MÃ­nimo 6 caracteres"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmarSenha",children:"Confirmar Nova Senha:"}),e.jsx("input",{type:"password",id:"confirmarSenha",value:h,onChange:r=>x(r.target.value),placeholder:"Digite a senha novamente",required:!0,disabled:c,className:"input-field",minLength:6})]}),t&&e.jsxs("div",{className:"error-message",children:["âŒ ",t]}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:c,children:c?"â³ Salvando...":"âœ… Redefinir Senha"}),e.jsxs("div",{className:"security-tips",children:[e.jsx("h3",{children:"ğŸ›¡ï¸ Dicas de SeguranÃ§a:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"âœ… Use pelo menos 6 caracteres"}),e.jsx("li",{children:"âœ… Misture letras, nÃºmeros e sÃ­mbolos"}),e.jsx("li",{children:"âœ… NÃ£o use senhas Ã³bvias (123456, senha, etc.)"}),e.jsx("li",{children:"âœ… NÃ£o compartilhe sua senha com ninguÃ©m"})]})]})]})]})})]}):e.jsxs("div",{className:"page-wrapper",children:[e.jsx(l,{}),e.jsx("div",{className:"redefinir-senha-container",children:e.jsx("div",{className:"redefinir-senha-card",children:e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"âŒ Link InvÃ¡lido"}),e.jsx("p",{children:t}),e.jsx("button",{onClick:()=>o("/esqueci-senha"),className:"action-btn",children:"ğŸ” Solicitar novo link"}),e.jsx("button",{onClick:()=>o("/login"),className:"secondary-btn",children:"â† Voltar ao login"})]})})})]})}export{w as default};
