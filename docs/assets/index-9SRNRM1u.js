import{u as z,r as d,j as l,R as g}from"./index-D6U7PXQE.js";function L({requireAuth:e=!1,user:t=null,initialValues:n={},onRequireLogin:r=null,onSubmit:o=null}){const s=z(),[u,m]=d.useState({nome:"",email:"",mensagem:"",...n}),[i,j]=d.useState(!1),f=d.useRef(null),v=()=>`contato_rascunho_${t&&t.id?t.id:"anon"}`;d.useEffect(()=>{try{const a=localStorage.getItem(v());if(a){const c=JSON.parse(a);c&&typeof c=="object"&&m(O=>({...O,...c}))}}catch(a){console.warn("Failed to restore contato draft",a)}return()=>{f.current&&(clearTimeout(f.current),f.current=null)}},[t]),d.useEffect(()=>{t&&m(a=>({...a,nome:a.nome||t.nome||t.name||"",email:a.email||t.email||""}))},[t]);const y=a=>{const{name:c,value:O}=a.target,p={...u,[c]:O};m(p),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{try{p.nome||p.email||p.mensagem?localStorage.setItem(v(),JSON.stringify(p)):localStorage.removeItem(v())}catch(C){console.warn("Failed to save contato draft",C)}f.current=null},700)};if(e&&!t){const a=()=>{if(typeof r=="function")return r();s("/login")};return l.jsxs("div",{className:"contato-need-login",children:[l.jsx("p",{children:"FaÃ§a login para enviar uma mensagem."}),l.jsx("button",{type:"button",className:"contato-login-btn",onClick:a,children:"Entrar"})]})}const N=async a=>{if(a.preventDefault(),!i){j(!0);try{typeof o=="function"?await o(u):alert("Mensagem enviada com sucesso!"),m({nome:"",email:"",mensagem:"",...n});try{localStorage.removeItem(v())}catch{}}catch(c){console.error("Erro ao enviar contato:",c),alert("Falha ao enviar a mensagem. Tente novamente.")}finally{j(!1)}}};return l.jsxs("form",{className:"contato-form-wrapper",onSubmit:N,children:[l.jsx("input",{name:"nome",className:"contato-input",type:"text",placeholder:"Seu nome",value:u.nome,onChange:y,required:!0}),l.jsx("input",{name:"email",className:"contato-input",type:"email",placeholder:"Seu e-mail",value:u.email,onChange:y,required:!0}),l.jsx("textarea",{name:"mensagem",className:"contato-textarea",placeholder:"Mensagem",rows:6,value:u.mensagem,onChange:y,required:!0}),l.jsx("button",{className:"contato-submit",type:"submit",disabled:i,children:i?"Enviando...":"Enviar Mensagem"})]})}var P={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},w=g.createContext&&g.createContext(P),_=["attr","size","title"];function F(e,t){if(e==null)return{};var n=D(e,t),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function D(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(r){I(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I(e,t,n){return t=T(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=M(e,"string");return typeof t=="symbol"?t:t+""}function M(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E(e){return e&&e.map((t,n)=>g.createElement(t.tag,b({key:n},t.attr),E(t.child)))}function S(e){return t=>g.createElement(W,h({attr:b({},e.attr)},t),E(e.child))}function W(e){var t=n=>{var{attr:r,size:o,title:s}=e,u=F(e,_),m=o||n.size||"1em",i;return n.className&&(i=n.className),e.className&&(i=(i?i+" ":"")+e.className),g.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:i,style:b(b({color:e.color||n.color},n.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),s&&g.createElement("title",null,s),e.children)};return w!==void 0?g.createElement(w.Consumer,null,n=>t(n)):t(P)}function R(e){return S({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function q(e){return S({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}export{L as C,R as F,q as a};
