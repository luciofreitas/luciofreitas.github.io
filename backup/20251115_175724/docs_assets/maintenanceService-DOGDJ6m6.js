const c="pf_maintenances";function l(t){try{return String(t||"").trim().toLowerCase()}catch{return String(t||"")}}async function i(t){if(!t)return[];try{const n=JSON.parse(localStorage.getItem(c)||"{}"),e=l(t);return n[e]||[]}catch(n){return console.error("Erro ao carregar manutenções:",n),[]}}async function s(t,n){if(!t)return!1;try{const e=JSON.parse(localStorage.getItem(c)||"{}"),r=l(t);return e[r]=n,localStorage.setItem(c,JSON.stringify(e)),!0}catch(e){return console.error("Erro ao salvar manutenções:",e),!1}}async function u(t,n){if(!t||!n)return null;try{const e=await i(t),r={...n,id:Date.now().toString(),createdAt:new Date().toISOString()},a=[...e,r];return await s(t,a),r}catch(e){return console.error("Erro ao adicionar manutenção:",e),null}}async function f(t,n,e){if(!t||!n)return!1;try{const a=(await i(t)).map(o=>o.id===n?{...o,...e,updatedAt:new Date().toISOString()}:o);return await s(t,a),!0}catch(r){return console.error("Erro ao atualizar manutenção:",r),!1}}async function y(t,n){if(!t||!n)return!1;try{const r=(await i(t)).filter(a=>a.id!==n);return await s(t,r),!0}catch(e){return console.error("Erro ao deletar manutenção:",e),!1}}export{u as a,y as d,i as g,f as u};
